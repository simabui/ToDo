(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{ch6i:function(e,t,n){},e6Wu:function(e,t,n){"use strict";n.r(t);n("ch6i");var i=function(e){return`\n  <div class="note" data-status="${e.status}" data-id="${e.id}">\n    <h2 class="note__title">${e.title}</h2>\n    <div class="note__description">${e.desc}</div>\n    <div class="note__block">\n      <span class="note__priority note__priority-${e.prio}">${e.prio}</span>\n      <div class="note__option">\n      <span>...</span>\n      <ul class="note__additional">\n      <li class="note__list note__top" data-type="done">done</li>\n      <li class="note__list" data-type="edit">edit</li>\n      <li class="note__list" data-type="delete">delete</li>\n    </ul>\n      </div>\n    </div>\n  </div>`};function o(){try{localStorage.setItem("collection",JSON.stringify(r.collection))}catch(e){console.error("Set state error: ",e)}}!function(){const e=JSON.parse(localStorage.getItem("collection")),t=document.querySelector("#task-list");try{if(null===e)return;const n=e.reduce((e,t)=>e+i(t),"");t.insertAdjacentHTML("beforeend",n)}catch(e){console.error("Set state error: ",e)}}();const r={collection:[],editObj:{},pushtoCollection(e){this.collection.push(e)},createTemplate(e,t,n){const r={id:Date.now(),status:"open",title:e,desc:t,prio:n};this.pushtoCollection(r);const c=i(r);this.insertTemplate(c),o()},insertTemplate(e){c.list.insertAdjacentHTML("beforeend",e)},remove(e){this.collection=this.collection.filter(t=>t.id!==e),o()},setStatus(e){this.collection.find(t=>t.id===e).status="done",o()},edit(e){this.editObj=this.collection.find(t=>t.id===e),c.edit.classList.add("is-open");const{title:t,description:n,priority:i}=c.edit.children[0].elements;t.value=this.editObj.title,n.value=this.editObj.desc,i.value=this.editObj.prio},renderEdit(e,t,n){this.editObj.title=e,this.editObj.desc=t,this.editObj.prio=n,this.renderFromTemplate(this.collection),o()},renderFromTemplate(e){const t=e.reduce((e,t)=>e+i(t),"");c.list.innerHTML="",this.insertTemplate(t)},filterInput(e){const t=this.collection.filter(t=>{if(t.title.includes(e))return t});this.renderFromTemplate(t)},filterStatus(e){const t=this.collection.filter(t=>"all"===e?t:t.status===e);this.renderFromTemplate(t)},filterPrio(e){const t=this.collection.filter(t=>"all"===e?t:t.prio===e);this.renderFromTemplate(t)}};!function(){try{const e=JSON.parse(localStorage.getItem("collection"));if(null===e)return;r.collection.push(...e)}catch(e){console.error(e)}}(),n.d(t,"refs",(function(){return c}));const c={inputSearch:document.querySelector("#task-search"),create:document.querySelector("#button-create"),form:document.querySelector("#create-form"),edit:document.querySelector("#edit-form"),cancel:document.querySelector("#cancel"),cancelEdit:document.querySelector("#cancel-edit"),save:document.querySelector("#save"),saveEdit:document.querySelector("#save-edit"),cancelEdit:document.querySelector("#cancel-edit"),createForm:document.querySelector(".create-form"),list:document.querySelector("#task-list"),taskStatus:document.querySelector("#task-status"),taskPrio:document.querySelector("#task-priority")};function s(){c.form.classList.remove("is-open")}function l(e){e.preventDefault(),c.edit.classList.remove("is-open")}c.create.addEventListener("click",(function(e){e.preventDefault(),c.form.classList.add("is-open")})),c.form.addEventListener("click",(function(e){e.preventDefault(),(e.target===e.currentTarget||e.target===c.cancel)&&s();return!1})),c.save.addEventListener("click",(function(e){e.preventDefault();const{title:t,description:n,priority:i}=c.createForm.elements;if(0===t.length||0===n.length)return void alert("Fill title and description before Save");r.createTemplate(t.value,n.value,i.value),c.createForm.reset(),s()})),c.saveEdit.addEventListener("click",(function(e){e.preventDefault(),document.body.style.overflow="hidden";const{title:t,description:n,priority:i}=c.edit.children[0].elements;r.renderEdit(t.value,n.value,i.value),l(e)})),c.cancelEdit.addEventListener("click",l),c.list.addEventListener("click",(function(e){const t=e.target.closest(".note"),n=e.target.dataset.type;"SPAN"===e.target.nodeName?t.querySelector(".note__additional").classList.add("note-open"):e.target!==e.currentTarget&&(console.log("test"),t.querySelector(".note__additional").classList.remove("note-open"));"done"===n&&function(e){const t=+e.dataset.id;r.setStatus(t),e.dataset.status="done"}(t);"delete"===n&&function(e){e.remove();const t=+e.dataset.id;r.remove(t)}(t);"edit"===n&&function(e){const t=+e.dataset.id;r.edit(t)}(t)})),c.inputSearch.addEventListener("input",(function(){const e=c.inputSearch.value;r.filterInput(e)})),c.taskStatus.addEventListener("change",(function(){const e=c.taskStatus.value;r.filterStatus(e)})),c.taskPrio.addEventListener("change",(function(){const e=c.taskPrio.value;r.filterPrio(e)})),document.body.style.overflow="hidden"}},[["e6Wu",1]]]);