(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{ch6i:function(e,t,n){},e6Wu:function(e,t,n){"use strict";n.r(t);n("ch6i");var i=function(e){return`\n  <div class="note" data-status="${e.status}" data-id="${e.id}">\n    <h2 class="note__title">${e.title}</h2>\n    <div class="note__description">${e.desc}</div>\n    <div class="note__block">\n      <span class="note__priority note__priority-${e.prio}">${e.prio}</span>\n      <div class="note__option">\n      <span>...</span>\n      <ul class="note__additional">\n      <li class="note__list note__top" data-type="done">done</li>\n      <li class="note__list" data-type="edit">edit</li>\n      <li class="note__list" data-type="delete">delete</li>\n    </ul>\n      </div>\n    </div>\n  </div>`};function o(){try{localStorage.setItem("collection",JSON.stringify(c.collection))}catch(e){console.error("Set state error: ",e)}}!function(){const e=JSON.parse(localStorage.getItem("collection")),t=document.querySelector("#task-list");try{if(null===e)return;const n=e.reduce((e,t)=>e+i(t),"");t.insertAdjacentHTML("beforeend",n)}catch(e){console.error("Set state error: ",e)}}();const c={collection:[],editObj:{},pushtoCollection(e){this.collection.push(e)},createTemplate(e,t,n){const c={id:Date.now(),status:"open",title:e,desc:t,prio:n};this.pushtoCollection(c);const r=i(c);this.insertTemplate(r),o()},insertTemplate(e){r.list.insertAdjacentHTML("beforeend",e)},remove(e){this.collection=this.collection.filter(t=>t.id!==e),o()},setStatus(e){this.collection.find(t=>t.id===e).status="done",o()},edit(e){this.editObj=this.collection.find(t=>t.id===e),r.edit.classList.add("is-open");const t=r.edit.children[0].elements.title,n=r.edit.children[0].elements.description,i=r.edit.children[0].elements.priority;t.value=this.editObj.title,n.value=this.editObj.desc,i.value=this.editObj.prio},renderEdit(e,t,n){this.editObj.title=e,this.editObj.desc=t,this.editObj.prio=n,this.renderFromTemplate(this.collection),o()},renderFromTemplate(e){const t=e.reduce((e,t)=>e+i(t),"");r.list.innerHTML="",this.insertTemplate(t)},filterInput(e){const t=this.collection.filter(t=>{if(t.title.includes(e))return t});this.renderFromTemplate(t)},filterStatus(e){const t=this.collection.filter(t=>"all"===e?t:t.status===e);this.renderFromTemplate(t)},filterPrio(e){const t=this.collection.filter(t=>"all"===e?t:t.prio===e);this.renderFromTemplate(t)}};!function(){try{const e=JSON.parse(localStorage.getItem("collection"));if(null===e)return;c.collection.push(...e)}catch(e){console.error(e)}}(),n.d(t,"refs",(function(){return r}));const r={inputSearch:document.querySelector("#task-search"),create:document.querySelector("#button-create"),form:document.querySelector("#create-form"),edit:document.querySelector("#edit-form"),cancel:document.querySelector("#cancel"),cancelEdit:document.querySelector("#cancel-edit"),save:document.querySelector("#save"),saveEdit:document.querySelector("#save-edit"),cancelEdit:document.querySelector("#cancel-edit"),createForm:document.querySelector(".create-form"),list:document.querySelector("#task-list"),taskStatus:document.querySelector("#task-status"),taskPrio:document.querySelector("#task-priority")};function s(){r.form.classList.remove("is-open")}function l(e){e.preventDefault(),r.edit.classList.remove("is-open")}r.create.addEventListener("click",(function(e){e.preventDefault(),r.form.classList.add("is-open")})),r.form.addEventListener("click",(function(e){e.preventDefault(),(e.target===e.currentTarget||e.target===r.cancel)&&s();return!1})),r.save.addEventListener("click",(function(e){e.preventDefault();const t=r.createForm.elements.title.value,n=r.createForm.elements.description.value,i=r.createForm.priority.value;if(0===t.length||0===n.length)return void alert("Fill title and description before Save");c.createTemplate(t,n,i),r.createForm.reset(),s()})),r.saveEdit.addEventListener("click",(function(e){e.preventDefault();const t=r.edit.children[0].elements.title.value,n=r.edit.children[0].elements.description.value,i=r.edit.children[0].priority.value;c.renderEdit(t,n,i),l(e)})),r.cancelEdit.addEventListener("click",l),r.list.addEventListener("click",(function(e){const t=e.target.closest(".note"),n=e.target.dataset.type;"SPAN"===e.target.nodeName&&t.querySelector(".note__additional").classList.toggle("note-open");"done"===n&&function(e){const t=+e.dataset.id;c.setStatus(t),e.dataset.status="done"}(t);"delete"===n&&function(e){e.remove();const t=+e.dataset.id;c.remove(t)}(t);"edit"===n&&function(e){const t=+e.dataset.id;c.edit(t)}(t)})),r.inputSearch.addEventListener("input",(function(){const e=r.inputSearch.value;c.filterInput(e)})),r.taskStatus.addEventListener("change",(function(){const e=r.taskStatus.value;c.filterStatus(e)})),r.taskPrio.addEventListener("change",(function(){const e=r.taskPrio.value;c.filterPrio(e)}))}},[["e6Wu",1]]]);