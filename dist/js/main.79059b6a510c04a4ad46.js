(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{ch6i:function(t,e,n){},e6Wu:function(t,e,n){"use strict";n.r(e);n("ch6i");function o(){try{localStorage.setItem("collection",JSON.stringify(r.collection))}catch(t){console.error("Set state error: ",t)}}!function(){const t=JSON.parse(localStorage.getItem("collection")),e=document.querySelector("#task-list");try{if(null===t)return;const n=t.reduce((t,e)=>t+i(e),"");e.insertAdjacentHTML("beforeend",n)}catch(t){console.error("Set state error: ",t)}}();const r={collection:[],pushtoCollection(t){this.collection.push(t)},createTemplate(t,e,n){const r={id:Date.now(),status:"open",title:t,desc:e,prio:n};this.pushtoCollection(r);const s=i(r);this.insertTemplate(s),o()},insertTemplate(t){s.list.insertAdjacentHTML("beforeend",t)},remove(t){this.collection=this.collection.filter(e=>e.id!==t),o()},setStatus(t){this.collection.find(e=>e.id===t).status="done",o()},renderFromTemplate(t){const e=t.reduce((t,e)=>t+i(e),"");s.list.innerHTML="",this.insertTemplate(e)},filterInput(t){const e=this.collection.filter(e=>{if(e.title.includes(t))return e});this.renderFromTemplate(e)},filterStatus(t){const e=this.collection.filter(e=>"all"===t?e:e.status===t);this.renderFromTemplate(e)},filterPrio(t){const e=this.collection.filter(e=>"all"===t?e:e.prio===t);this.renderFromTemplate(e)}};function i(t){return`\n  <div class="note" data-status="${t.status}" data-id="${t.id}">\n    <h2 class="note__title">${t.title}</h2>\n    <div class="note__description">${t.desc}</div>\n    <div class="note__block">\n      <span class="note__priority note__priority-${t.prio}">${t.prio}</span>\n      <div class="note__option">\n      <span>...</span>\n      <ul class="note__additional">\n      <li class="note__list note__top" data-type="done">done</li>\n      <li class="note__list" data-type="edit">edit</li>\n      <li class="note__list" data-type="delete">delete</li>\n    </ul>\n      </div>\n    </div>\n  </div>`}!function(){try{const t=JSON.parse(localStorage.getItem("collection"));if(null===t)return;r.collection.push(...t)}catch(t){console.error(t)}}(),n.d(e,"refs",(function(){return s}));const s={inputSearch:document.querySelector("#task-search"),create:document.querySelector("#button-create"),overlay:document.querySelector(".overlay"),cancel:document.querySelector("#cancel"),save:document.querySelector("#save"),createForm:document.querySelector(".create-form"),list:document.querySelector("#task-list"),taskStatus:document.querySelector("#task-status"),taskPrio:document.querySelector("#task-priority")};function c(t){t.preventDefault(),s.overlay.classList.add("is-open")}function a(){s.overlay.classList.remove("is-open")}function l(t){t.remove();const e=Number(t.dataset.id);r.remove(e)}s.create.addEventListener("click",c),s.overlay.addEventListener("click",(function(t){t.preventDefault(),(t.target===t.currentTarget||t.target===s.cancel)&&a();return!1})),s.save.addEventListener("click",(function(t){t.preventDefault();const e=s.createForm.elements.title.value,n=s.createForm.elements.description.value,o=s.createForm.priority.value;if(0===e.length||0===n.length)return void alert("Fill title and description before Save");r.createTemplate(e,n,o),s.createForm.reset(),a()})),s.list.addEventListener("click",(function(t){const e=t.target.closest(".note");"done"===t.target.dataset.type&&function(t){const e=Number(t.dataset.id);r.setStatus(e),t.dataset.status="done"}(e);"delete"===t.target.dataset.type&&l(e);"edit"===t.target.dataset.type&&(c(t),l(e))})),s.inputSearch.addEventListener("input",(function(){const t=s.inputSearch.value;r.filterInput(t)})),s.taskStatus.addEventListener("change",(function(){const t=s.taskStatus.value;r.filterStatus(t)})),s.taskPrio.addEventListener("change",(function(){const t=s.taskPrio.value;r.filterPrio(t)}))}},[["e6Wu",1]]]);